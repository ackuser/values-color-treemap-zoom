<!doctype html>
<meta charset="utf-8">

<script src="http://www.d3plus.org/js/d3.js"></script>
<script src="http://www.d3plus.org/js/d3plus.js"></script>

<div id="viz"></div>

<script>
// instantiate our D3plus viz object
var viz = d3plus.viz();

// here we get all the data we need from the server, first the raw data, then
// each of the attribute files
var browser = [
  {
    "song_id": "1",
    "song_title": "Firefox",
    "artist_id": "2014",
    "album_id": 1,
    "duration": 38.5,
    "hotttnesss": null,
    "loudness": -10.504,
    "year": "1996"
  },
  {
    "song_id": "2",
    "song_title": "Chrome",
    "artist_id": "2014",
    "album_id": 1,
    "duration": 15.2,
    "hotttnesss": null,
    "loudness": -10.504,
    "year": "1996"
  },
  {
    "song_id": "3",
    "song_title": "Safari",
    "artist_id": "2014",
    "album_id": 1,
    "duration": 15.4,
    "hotttnesss": null,
    "loudness": -10.504,
    "year": "1996"
  },
  {
    "song_id": "4",
    "song_title": "Opera",
    "artist_id": "2014",
    "album_id": 1,
    "duration": 3.1,
    "hotttnesss": null,
    "loudness": -10.504,
    "year": "1996"
  },
  {
    "song_id": "5",
    "song_title": "IE",
    "artist_id": "2014",
    "album_id": 1,
    "duration": 21.2,
    "hotttnesss": null,
    "loudness": -10.504,
    "year": "1996"
  },
  {
    "song_id": "6",
    "song_title": "Others",
    "artist_id": "2014",
    "album_id": 1,
    "duration": 6.6,
    "hotttnesss": null,
    "loudness": -10.504,
    "year": "1996"
  },
  {
    "song_id": "SOJHRLU12A6701EB67",
    "song_title": "One Shine",
    "artist_id": "2014",
    "album_id": 2,
    "duration": 340.40118,
    "hotttnesss": 0.583401231,
    "loudness": -10.345,
    "year": null
  },
    {
    "song_id": "SOJHRLU12A6701EB56",
    "song_title": "One Shine 2",
    "artist_id": "AR8RXRI1187FB4104B",
    "album_id": 15646,
    "duration": 340.40118,
    "hotttnesss": 0.583401231,
    "loudness": -10.345,
    "year": null
  }
];
var artists = [
  {
    "count": 3,
    "artist_id": "2014",
    "names": "2014"
  },
  {
    "count": 3,
    "artist_id": "2015",
    "names": "2015",
  }
];
var albums = [
  {
    "count": 6,
    "name": "July",
    "album_id": 1
  },
  {
    "count": 6,
    "name": "August",
    "album_id": 2
  },
  {
    "count": 6,
    "name": "September",
    "album_id": 3
  },
  {
    "count": 6,
    "name": "July",
    "album_id": 4
  },
  {
    "count": 6,
    "name": "August",
    "album_id": 5
  },
  {
    "count": 6,
    "name": "September",
    "album_id": 6
  }
];

      // set up attributes look up dictionary
      var attrs = {"artist_id": artists, "album_id": albums, "song_id": browser};

      // set attributes on our viz object
      viz
        .container("#viz")
        .data(browser)
        .type("tree_map")
        .attrs(attrs)
        .size("duration")
        .id(["artist_id","album_id","song_id"])
        .text({"artist_id":"names","album_id":"name","song_id":["song_title","song_id"]})
        .tooltip({"artist_id":["names"],"album_id":["name"],"song_id":["song_title"]})
        .depth(0)
        //.year(1996)
        //.year_var("year")
        .draw()

</script>
